"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[274],{9763:function(e,t,a){a.d(t,{Z:function(){return c}});var r=a(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),c=(e,t)=>{let a=(0,r.forwardRef)((a,c)=>{let{color:i="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:d,className:u="",children:h,...g}=a;return(0,r.createElement)("svg",{ref:c,...s,width:l,height:l,stroke:i,strokeWidth:d?24*Number(o)/Number(l):o,className:["lucide","lucide-".concat(n(e)),u].join(" "),...g},[...t.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(h)?h:[h]])});return a.displayName="".concat(e),a}},2489:function(e,t,a){a.d(t,{Z:function(){return r}});let r=(0,a(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},2226:function(e,t,a){a.d(t,{Z:function(){return y}});var r=a(7437),s=a(1245),n=a(9376),c=a(9763);let i=(0,c.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),l=(0,c.Z)("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),o=(0,c.Z)("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);var d=a(2489);let u=(0,c.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),h=(0,c.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),g=(0,c.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);var x=a(2265),m=a(9064);function y(e){let{children:t}=e,{user:a,logout:c}=(0,s.a)(),y=(0,n.useRouter)(),p=(0,n.usePathname)(),[f,w]=(0,x.useState)(!1),v=async()=>{try{await c(),y.replace("/login"),m.Am.success("Logged out successfully")}catch(e){console.error("Logout failed:",e),m.Am.error("Failed to logout")}},b=[{name:"Dashboard",href:"/dashboard",icon:i,current:"/dashboard"===p},{name:"Projects",href:"/projects",icon:l,current:"/projects"===p},{name:"Tasks",href:"/tasks",icon:o,current:"/tasks"===p}];return a?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsxs)("div",{className:"fixed inset-0 z-50 lg:hidden ".concat(f?"block":"hidden"),children:[(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>w(!1)}),(0,r.jsxs)("div",{className:"fixed inset-y-0 left-0 flex w-64 flex-col bg-white shadow-xl",children:[(0,r.jsxs)("div",{className:"flex h-16 items-center justify-between px-4 border-b border-gray-200",children:[(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Task Manager"}),(0,r.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:(0,r.jsx)(d.Z,{className:"h-6 w-6"})})]}),(0,r.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:b.map(e=>{let t=e.icon;return(0,r.jsxs)("a",{href:e.href,onClick:t=>{t.preventDefault(),y.push(e.href),w(!1)},className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(e.current?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,r.jsx)(t,{className:"mr-3 h-5 w-5 flex-shrink-0 ".concat(e.current?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),e.name]},e.name)})}),(0,r.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-white",children:[a.firstName.charAt(0),a.lastName.charAt(0)]})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[a.firstName," ",a.lastName]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:a.email})]})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("button",{onClick:()=>{y.push("/profile"),w(!1)},className:"group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,r.jsx)(u,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),"Profile"]}),(0,r.jsxs)("button",{onClick:v,className:"group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,r.jsx)(h,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),"Sign out"]})]})]})]})]}),(0,r.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,r.jsxs)("div",{className:"flex flex-col flex-grow bg-white border-r border-gray-200",children:[(0,r.jsx)("div",{className:"flex h-16 items-center px-4 border-b border-gray-200",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"Task Manager"})}),(0,r.jsx)("nav",{className:"flex-1 space-y-1 px-2 py-4",children:b.map(e=>{let t=e.icon;return(0,r.jsxs)("a",{href:e.href,onClick:t=>{t.preventDefault(),y.push(e.href)},className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(e.current?"bg-blue-100 text-blue-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,r.jsx)(t,{className:"mr-3 h-5 w-5 flex-shrink-0 ".concat(e.current?"text-blue-500":"text-gray-400 group-hover:text-gray-500")}),e.name]},e.name)})}),(0,r.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-500 flex items-center justify-center",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-white",children:[a.firstName.charAt(0),a.lastName.charAt(0)]})})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:[a.firstName," ",a.lastName]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:a.email})]})]}),(0,r.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,r.jsxs)("button",{onClick:()=>y.push("/profile"),className:"group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,r.jsx)(u,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),"Profile"]}),(0,r.jsxs)("button",{onClick:v,className:"group flex w-full items-center px-2 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900",children:[(0,r.jsx)(h,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-gray-500"}),"Sign out"]})]})]})]})}),(0,r.jsxs)("div",{className:"lg:pl-64",children:[(0,r.jsx)("div",{className:"sticky top-0 z-40 lg:hidden",children:(0,r.jsxs)("div",{className:"flex h-16 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6",children:[(0,r.jsx)("button",{type:"button",className:"-m-2.5 p-2.5 text-gray-700 lg:hidden",onClick:()=>w(!0),children:(0,r.jsx)(g,{className:"h-6 w-6"})}),(0,r.jsx)("div",{className:"h-6 w-px bg-gray-200 lg:hidden"}),(0,r.jsx)("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:(0,r.jsx)("div",{className:"flex items-center",children:(0,r.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"Task Manager"})})})]})}),(0,r.jsx)("main",{children:t})]})]}):(0,r.jsx)(r.Fragment,{children:t})}},1245:function(e,t,a){a.d(t,{AuthProvider:function(){return o},a:function(){return d}});var r=a(7437),s=a(2265),n=a(1837),c=a(9064),i=a(9376);let l=(0,s.createContext)(void 0),o=e=>{let{children:t}=e,[a,o]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0),h=(0,i.useRouter)();(0,s.useEffect)(()=>{(async()=>{try{if(n.Z.isAuthenticated()){var e;let t=await n.Z.getProfile();o((null===(e=t.data)||void 0===e?void 0:e.user)||null)}}catch(e){console.error("Auth check failed:",e),await n.Z.logout()}finally{u(!1)}})()},[]);let g=async e=>{try{let t=await n.Z.login(e);o(t.data.user),c.Am.success("Welcome back!"),h.push("/dashboard")}catch(r){var t,a;let e=(null===(a=r.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Login failed";throw c.Am.error(e),r}},x=async e=>{try{let t=await n.Z.register(e);o(t.data.user),c.Am.success("Account created successfully!"),h.push("/dashboard")}catch(r){var t,a;let e=(null===(a=r.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Registration failed";throw c.Am.error(e),r}},m=async()=>{try{await n.Z.logout(),o(null),c.Am.success("Logged out successfully"),h.push("/login")}catch(e){console.error("Logout error:",e),o(null),h.push("/login")}},y=async e=>{var t,a,r;try{let a=await n.Z.updateProfile(e);o((null===(t=a.data)||void 0===t?void 0:t.user)||null),c.Am.success("Profile updated successfully")}catch(t){let e=(null===(r=t.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Profile update failed";throw c.Am.error(e),t}};return(0,r.jsx)(l.Provider,{value:{user:a,loading:d,login:g,register:x,logout:m,updateUser:y,isAuthenticated:!!a},children:t})},d=()=>{let e=(0,s.useContext)(l);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},1837:function(e,t,a){var r=a(3464),s=a(4131),n=a(9064);class c{async getUsers(){return(await this.client.get("/users")).data}setTokens(e,t){this.accessToken=e,s.Z.set("accessToken",e,{expires:7,secure:!0,sameSite:"strict"}),s.Z.set("refreshToken",t,{expires:30,secure:!0,sameSite:"strict"})}clearTokens(){this.accessToken=null,s.Z.remove("accessToken"),s.Z.remove("refreshToken")}async login(e){let t=await this.client.post("/auth/login",e),{accessToken:a,refreshToken:r}=t.data.data;return this.setTokens(a,r),t.data}async register(e){let t=await this.client.post("/auth/register",e),{accessToken:a,refreshToken:r}=t.data.data;return this.setTokens(a,r),t.data}async refreshToken(e){return(await this.client.post("/auth/refresh",{refreshToken:e})).data}async logout(){try{await this.client.post("/auth/logout")}catch(e){}finally{this.clearTokens()}}async getProfile(){return(await this.client.get("/auth/profile")).data}async updateProfile(e){return(await this.client.put("/auth/profile",e)).data}async changePassword(e){return(await this.client.put("/auth/change-password",e)).data}async getProjects(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&t.append(a,String(r))}),(await this.client.get("/projects?".concat(t))).data}async getProject(e){return(await this.client.get("/projects/".concat(e))).data}async createProject(e){return(await this.client.post("/projects",e)).data}async updateProject(e,t){return(await this.client.put("/projects/".concat(e),t)).data}async deleteProject(e){return(await this.client.delete("/projects/".concat(e))).data}async getProjectStats(e){return(await this.client.get("/projects/".concat(e,"/stats"))).data}async getTasks(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&t.append(a,String(r))}),(await this.client.get("/tasks?".concat(t))).data}async getTask(e){return(await this.client.get("/tasks/".concat(e))).data}async createTask(e){return(await this.client.post("/tasks",e)).data}async updateTask(e,t){return(await this.client.put("/tasks/".concat(e),t)).data}async deleteTask(e){return(await this.client.delete("/tasks/".concat(e))).data}async addTaskComment(e,t){return(await this.client.post("/tasks/".concat(e,"/comments"),{comment:t})).data}async getMyTasks(e){let t=new URLSearchParams;return e&&Object.entries(e).forEach(e=>{let[a,r]=e;null!=r&&t.append(a,String(r))}),(await this.client.get("/tasks/my-tasks?".concat(t))).data}async getDashboardAnalytics(){return(await this.client.get("/analytics/dashboard")).data}async getProjectAnalytics(e,t){let a=new URLSearchParams;return e&&a.append("startDate",e),t&&a.append("endDate",t),(await this.client.get("/analytics/projects?".concat(a))).data}async getTeamAnalytics(e,t){let a=new URLSearchParams;return e&&a.append("startDate",e),t&&a.append("endDate",t),(await this.client.get("/analytics/team?".concat(a))).data}isAuthenticated(){return!!this.accessToken}getAccessToken(){return this.accessToken}constructor(){this.accessToken=null,this.client=r.Z.create({baseURL:"http://localhost:5000/api",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.accessToken=s.Z.get("accessToken")||null,this.client.interceptors.request.use(e=>(this.accessToken&&(e.headers.Authorization="Bearer ".concat(this.accessToken)),e),e=>Promise.reject(e)),this.client.interceptors.response.use(e=>e,async e=>{var t,a,r,c;let i=e.config;if((null===(t=e.response)||void 0===t?void 0:t.status)===401&&!i._retry){i._retry=!0;try{let e=s.Z.get("refreshToken");if(e){let t=await this.refreshToken(e);return this.setTokens(t.data.accessToken,t.data.refreshToken),this.client(i)}}catch(e){this.logout(),window.location.href="/login"}}if((null===(a=e.response)||void 0===a?void 0:a.status)!==401){let t=(null===(c=e.response)||void 0===c?void 0:null===(r=c.data)||void 0===r?void 0:r.message)||"An error occurred";n.Am.error(t)}return Promise.reject(e)})}}let i=new c;t.Z=i},3448:function(e,t,a){function r(e,t){return("string"==typeof e?new Date(e):e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",...t})}function s(e){return e.split("_").map(e=>{var t;return(t=e.toLowerCase()).charAt(0).toUpperCase()+t.slice(1)}).join(" ")}function n(e){switch(e.toLowerCase()){case"low":return"text-green-600 bg-green-50 border-green-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"high":return"text-orange-600 bg-orange-50 border-orange-200";case"critical":case"urgent":return"text-red-600 bg-red-50 border-red-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}}function c(e){switch(e.toLowerCase()){case"planning":case"todo":default:return"text-gray-600 bg-gray-50 border-gray-200";case"in_progress":return"text-blue-600 bg-blue-50 border-blue-200";case"review":case"testing":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"completed":return"text-green-600 bg-green-50 border-green-200";case"on_hold":case"blocked":return"text-orange-600 bg-orange-50 border-orange-200";case"cancelled":return"text-red-600 bg-red-50 border-red-200"}}a.d(t,{_$:function(){return n},p6:function(){return r},uV:function(){return s},z2:function(){return c}})}}]);