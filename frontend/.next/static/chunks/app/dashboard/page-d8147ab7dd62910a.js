(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{5712:function(e,s,t){Promise.resolve().then(t.bind(t,441))},441:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return x}});var a=t(7437),r=t(2265),l=t(1245),i=t(9376),d=t(1837),c=t(3448),n=t(2226);function x(){let{user:e,loading:s}=(0,l.a)(),t=(0,i.useRouter)(),[x,m]=(0,r.useState)(null),[o,h]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[j,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!s&&!e){t.replace("/login");return}e&&y()},[e,s,t]);let y=async()=>{try{var e,s,t,a,r,l;u(!0);let[i,c,n]=await Promise.all([d.Z.getDashboardAnalytics(),d.Z.getProjects({limit:100}),d.Z.getTasks({limit:100})]);if(i.success&&i.data&&m(i.data),c&&c.data){let a=null!==(t=null!==(s=null===(e=c.data)||void 0===e?void 0:e.items)&&void 0!==s?s:c.items)&&void 0!==t?t:[];h(Array.isArray(a)?a:[])}else h([]);if(n&&n.data){let e=null!==(l=null!==(r=null===(a=n.data)||void 0===a?void 0:a.items)&&void 0!==r?r:n.items)&&void 0!==l?l:[];g(Array.isArray(e)?e:[])}else g([])}catch(e){console.error("Failed to load dashboard data:",e)}finally{u(!1)}};if(s||j)return(0,a.jsx)(n.Z,{children:(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})});if(!e)return null;let N=e=>e?"string"==typeof e?"Unknown":"".concat(e.firstName," ").concat(e.lastName):"Unassigned",f=e=>e?"string"==typeof e?e:e.title:"Unknown Project";return(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Welcome back, ",e.firstName,"!"]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsx)("span",{className:"text-sm text-gray-600",children:(0,c.uV)(e.role)})})]})})}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[x&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Projects"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:x.overview.totalProjects})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tasks"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:x.overview.totalTasks})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Completed Tasks"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:x.overview.completedTasks}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[x.overview.completionRate.toFixed(1),"% completion rate"]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Tasks"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-red-600",children:x.overview.overdueTasks})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tasks by Status"}),(0,a.jsx)("div",{className:"space-y-3",children:x.taskStats.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1",children:[(0,a.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-3 ".concat((0,c.z2)(e._id).split(" ")[2])}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:(0,c.uV)(e._id)})]}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900",children:e.count})]},e._id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tasks by Priority"}),(0,a.jsx)("div",{className:"space-y-3",children:x.priorityStats.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1",children:[(0,a.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-3 ".concat((0,c._$)(e._id).split(" ")[2])}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:(0,c.uV)(e._id)})]}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900",children:e.count})]},e._id))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 border border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Projects by Status"}),(0,a.jsx)("div",{className:"space-y-3",children:x.projectStats.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center flex-1",children:[(0,a.jsx)("span",{className:"inline-block w-3 h-3 rounded-full mr-3 ".concat((0,c.z2)(e._id).split(" ")[2])}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:(0,c.uV)(e._id)})]}),(0,a.jsx)("span",{className:"text-sm font-bold text-gray-900",children:e.count})]},e._id))})]})]}),x.teamWorkload&&x.teamWorkload.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Team Workload"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Team Member"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Tasks"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"In Progress"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overdue"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion Rate"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.teamWorkload.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.userName}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.userEmail})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-900",children:e.totalTasks}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-blue-600",children:e.inProgressTasks}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-green-600",children:e.completedTasks}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-red-600",children:e.overdueTasks}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,a.jsxs)("span",{className:"text-sm font-medium ".concat(e.completionRate>=80?"text-green-600":e.completionRate>=50?"text-yellow-600":"text-red-600"),children:[e.completionRate.toFixed(1),"%"]})})]},e.userId))})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"})}),(0,a.jsx)("div",{className:"p-6",children:x.recentActivity&&x.recentActivity.length>0?(0,a.jsx)("div",{className:"space-y-4",children:x.recentActivity.slice(0,10).map(e=>(0,a.jsxs)("div",{className:"flex items-start justify-between py-3 border-b border-gray-100 last:border-b-0",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Project: ",f(e.projectId)]}),e.assignedTo&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-gray-400",children:"•"}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Assigned to: ",N(e.assignedTo)]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full whitespace-nowrap ".concat((0,c.z2)(e.status)),children:(0,c.uV)(e.status)}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full whitespace-nowrap ".concat((0,c._$)(e.priority)),children:(0,c.uV)(e.priority)}),(0,a.jsx)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:(0,c.p6)(e.updatedAt)})]})]},e._id))}):(0,a.jsx)("p",{className:"text-gray-600 text-center py-8",children:"No recent activity"})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-8",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"All Projects"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[o.length," total"]})]}),(0,a.jsx)("div",{className:"p-6",children:o.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>t.push("/projects"),children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsx)("h4",{className:"text-sm font-semibold text-gray-900 line-clamp-1",children:e.title}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat((0,c._$)(e.priority)),children:(0,c.uV)(e.priority)})]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 line-clamp-2 mb-3",children:e.description}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Status:"}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat((0,c.z2)(e.status)),children:(0,c.uV)(e.status)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Manager:"}),(0,a.jsx)("span",{className:"text-xs text-gray-900",children:N(e.managerId)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Team:"}),(0,a.jsxs)("span",{className:"text-xs text-gray-900",children:[Array.isArray(e.teamMembers)?e.teamMembers.length:0," ","members"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Deadline:"}),(0,a.jsx)("span",{className:"text-xs text-gray-900",children:(0,c.p6)(e.deadline)})]}),e.budget&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Budget:"}),(0,a.jsxs)("span",{className:"text-xs text-gray-900",children:["$",e.budget.toLocaleString()]})]})]})]},e._id))}):(0,a.jsx)("p",{className:"text-gray-600 text-center py-8",children:"No projects found"})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,a.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"All Tasks"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[p.length," total"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:p.length>0?(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Task"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Priority"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>t.push("/tasks"),children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.title}),(0,a.jsx)("div",{className:"text-xs text-gray-500 line-clamp-1",children:e.description})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:f(e.projectId)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:N(e.assignedTo)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat((0,c.z2)(e.status)),children:(0,c.uV)(e.status)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat((0,c._$)(e.priority)),children:(0,c.uV)(e.priority)})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:(0,c.p6)(e.dueDate)})]},e._id))})]}):(0,a.jsx)("p",{className:"text-gray-600 text-center py-8",children:"No tasks found"})})]})]})]})})}}},function(e){e.O(0,[610,274,971,117,744],function(){return e(e.s=5712)}),_N_E=e.O()}]);