(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{160:function(e,t,s){Promise.resolve().then(s.bind(s,587))},1047:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},740:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},4630:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8930:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},587:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(7437),a=s(2265),l=s(1245),n=s(9376),c=s(6481),i=s(1837),o=s(3448),d=s(9064),u=s(9397),x=s(3247),m=s(740),h=s(9763);let p=(0,h.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var g=s(4630),y=s(8930),j=s(1047);let f=(0,h.Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);var b=s(2226);function v(){let{user:e,loading:t}=(0,l.a)(),s=(0,n.useRouter)(),[c,h]=(0,a.useState)([]),[v,w]=(0,a.useState)(!0),[C,k]=(0,a.useState)("");null==e||e._id;let[M,I]=(0,a.useState)(""),[S,E]=(0,a.useState)(""),[Z,_]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!t&&!e){s.replace("/login");return}e&&P()},[e,t,s]);let P=async()=>{try{w(!0);let e={};C&&(e.search=C),M&&(e.status=M),S&&(e.priority=S);let t=await i.Z.getProjects(e);t.success&&t.data?h(t.data.items||[]):h([])}catch(e){console.error("Failed to load projects:",e),d.Am.error("Failed to load projects")}finally{w(!1)}},A=async e=>{if(confirm("Are you sure you want to delete this project? This action cannot be undone."))try{await i.Z.deleteProject(e),d.Am.success("Project deleted successfully"),P()}catch(e){console.error("Failed to delete project:",e),d.Am.error("Failed to delete project")}},L=c.filter(e=>{let t=e.title.toLowerCase().includes(C.toLowerCase())||e.description.toLowerCase().includes(C.toLowerCase()),s=!M||e.status===M,r=!S||e.priority===S;return t&&s&&r});if(t||v)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!e)return null;let T="admin"===e.role||"manager"===e.role;return(0,r.jsx)(b.Z,{children:(0,r.jsxs)("div",{className:"bg-gray-50",children:[(0,r.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Projects"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your team projects"})]}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:T&&(0,r.jsxs)("button",{onClick:()=>_(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,r.jsx)(u.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"New Project"})]})})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4 flex-1",children:[(0,r.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,r.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),(0,r.jsx)("input",{type:"text",placeholder:"Search projects...",value:C,onChange:e=>k(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full"})]}),(0,r.jsxs)("select",{value:M,onChange:e=>I(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Status"}),(0,r.jsx)("option",{value:"planning",children:"Planning"}),(0,r.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,r.jsx)("option",{value:"testing",children:"Testing"}),(0,r.jsx)("option",{value:"completed",children:"Completed"}),(0,r.jsx)("option",{value:"on_hold",children:"On Hold"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,r.jsxs)("select",{value:S,onChange:e=>E(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,r.jsx)("option",{value:"",children:"All Priority"}),(0,r.jsx)("option",{value:"low",children:"Low"}),(0,r.jsx)("option",{value:"medium",children:"Medium"}),(0,r.jsx)("option",{value:"high",children:"High"}),(0,r.jsx)("option",{value:"critical",children:"Critical"})]})]}),(0,r.jsxs)("button",{onClick:P,className:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-900 border border-gray-300 rounded-lg hover:bg-gray-50",children:[(0,r.jsx)(m.Z,{className:"w-4 h-4"}),(0,r.jsx)("span",{children:"Refresh"})]})]})}),0===L.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-12 text-center border border-gray-200",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(p,{className:"w-8 h-8 text-gray-400"})}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:T?"Get started by creating your first project.":"No projects match your current filters."}),T&&(0,r.jsx)("button",{onClick:()=>_(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Create Project"})]}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:L.map(e=>{var t;return(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.title}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>s.push("/projects/".concat(e._id)),className:"p-1 text-gray-400 hover:text-blue-600",children:(0,r.jsx)(g.Z,{className:"w-4 h-4"})}),T&&(0,r.jsx)("button",{onClick:()=>A(e._id),className:"p-1 text-gray-400 hover:text-red-600",children:(0,r.jsx)(y.Z,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((0,o.z2)(e.status)),children:(0,o.uV)(e.status)}),(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat((0,o._$)(e.priority)),children:(0,o.uV)(e.priority)})]}),(0,r.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(j.Z,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:["Due: ",(0,o.p6)(e.deadline)]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:[(null===(t=e.teamMembers)||void 0===t?void 0:t.length)||0," team members"]})]}),e.budget&&(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(f,{className:"w-4 h-4"}),(0,r.jsxs)("span",{children:["$",e.budget.toLocaleString()]})]})]}),(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,r.jsxs)("span",{children:["Manager:"," ","object"==typeof e.managerId?"".concat(e.managerId.firstName," ").concat(e.managerId.lastName):"Unknown"]}),(0,r.jsxs)("span",{children:["Created: ",(0,o.p6)(e.createdAt)]})]})})]},e._id)})})]}),Z&&(0,r.jsx)(N,{onClose:()=>_(!1),onSuccess:()=>{_(!1),P()}})]})})}function N(e){let{onClose:t,onSuccess:s}=e,[n,o]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[p,g]=(0,a.useState)(c.Ig.MEDIUM),[y,j]=(0,a.useState)(""),[f,b]=(0,a.useState)(!1),[v,N]=(0,a.useState)([]),[w,C]=(0,a.useState)([]),{user:k}=(0,l.a)(),M=(null==k?void 0:k._id)||"";(0,a.useEffect)(()=>{(async()=>{try{let e=await i.Z.getUsers();e.success&&e.data&&N(e.data)}catch(e){d.Am.error("Failed to load users")}})()},[]);let I=async e=>{e.preventDefault(),b(!0);try{await i.Z.createProject({title:n,description:u,deadline:m,priority:p,managerId:M,teamMembers:w,tags:y.split(",").map(e=>e.trim()).filter(Boolean)}),d.Am.success("Project created successfully"),s()}catch(e){var t,r;d.Am.error((null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||"Failed to create project")}finally{b(!1)}};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Create New Project"}),(0,r.jsxs)("form",{onSubmit:I,className:"space-y-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Project Title",value:n,onChange:e=>o(e.target.value),className:"w-full border rounded px-3 py-2",required:!0}),(0,r.jsx)("textarea",{placeholder:"Description",value:u,onChange:e=>x(e.target.value),className:"w-full border rounded px-3 py-2",rows:3}),(0,r.jsx)("input",{type:"date",value:m,onChange:e=>h(e.target.value),className:"w-full border rounded px-3 py-2"}),(0,r.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full border rounded px-3 py-2",children:[(0,r.jsx)("option",{value:c.Ig.LOW,children:"Low"}),(0,r.jsx)("option",{value:c.Ig.MEDIUM,children:"Medium"}),(0,r.jsx)("option",{value:c.Ig.HIGH,children:"High"}),(0,r.jsx)("option",{value:c.Ig.CRITICAL,children:"Critical"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Tags (comma separated)",value:y,onChange:e=>j(e.target.value),className:"w-full border rounded px-3 py-2"}),(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Assign Team Members"}),(0,r.jsx)("select",{multiple:!0,value:w,onChange:e=>{C(Array.from(e.target.selectedOptions).map(e=>e.value))},className:"w-full border rounded px-3 py-2 h-32",children:v.filter(e=>"admin"!==e.role).map(e=>(0,r.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName," (",e.email,")"]},e._id))}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",disabled:f,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:f,children:f?"Creating...":"Create"})]})]})]})})}},6481:function(e,t,s){"use strict";var r,a,l,n,c,i,o,d,u,x;s.d(t,{Ig:function(){return a},T8:function(){return n},hY:function(){return c}}),(i=r||(r={})).ADMIN="admin",i.MANAGER="manager",i.TEAM_MEMBER="team_member",(o=a||(a={})).LOW="low",o.MEDIUM="medium",o.HIGH="high",o.CRITICAL="critical",(d=l||(l={})).PLANNING="planning",d.IN_PROGRESS="in_progress",d.TESTING="testing",d.COMPLETED="completed",d.ON_HOLD="on_hold",d.CANCELLED="cancelled",(u=n||(n={})).LOW="low",u.MEDIUM="medium",u.HIGH="high",u.URGENT="urgent",(x=c||(c={})).TODO="todo",x.IN_PROGRESS="in_progress",x.REVIEW="review",x.TESTING="testing",x.COMPLETED="completed",x.BLOCKED="blocked"}},function(e){e.O(0,[610,274,971,117,744],function(){return e(e.s=160)}),_N_E=e.O()}]);